<div class="character-card">
  <button (click)="openDmgOverlay()">damage</button>

  @if (characterDataService.character) {
  <app-stat-box
    [strengthValue]="characterDataService.character!.strengthValue"
    [strengthBonus]="characterDataService.character!.strengthBonus"
    [agilityValue]="characterDataService.character!.agilityValue"
    [agilityBonus]="characterDataService.character!.agilityBonus"
    [constitutionValue]="characterDataService.character!.constitutionValue"
    [constitutionBonus]="characterDataService.character!.constitutionBonus"
    [intelligenceValue]="characterDataService.character!.intelligenceValue"
    [intelligenceBonus]="characterDataService.character!.intelligenceBonus"
    [charismaValue]="characterDataService.character!.charismaValue"
    [charismaBonus]="characterDataService.character!.charismaBonus"
  ></app-stat-box>

  <app-character-details
    [name]="characterDataService.character!.name"
    [maxHealth]="characterDataService.character!.maxHealth"
    [level]="characterDataService.character!.level"
  ></app-character-details>

  @for (skill of characterDataService.character.class.skills; track $index)
  {<app-skills-display [skill]="skill" [index]="$index"></app-skills-display>}
  @for (skill of characterDataService.character.customSkills; track $index) {
  <app-skills-display [skill]="skill" [index]="$index"></app-skills-display>
  } }
</div>

<!-- Weapon Inventar extra Komponente -->

<div>
  <ul class="weapon-inventory">
    <span>Base Weapons</span>
    @for (baseWeapon of characterDataService.character?.baseWeapons; track
    $index) {
    <li>{{ baseWeapon.name }}</li>
    }
    <span>Custom Weapons</span>
    @for (customWeapon of characterDataService.character?.customWeapons; track
    $index) {
    <li>{{ customWeapon.name }}</li>
    }
  </ul>

  <button (click)="toggleSelectBaseWeapon()">Open Select base Weapon</button>

  @if (selectBaseWeaponOpen) {
  <div>
    @for (baseWeapon of gameDataService.baseWeapons; track $index) {
    <ul>
      <li (click)="selectBaseWeapon(baseWeapon)">{{ baseWeapon.name }}</li>
    </ul>
    }
    <button (click)="saveSelectedWeapons()">save</button>
  </div>
  }
</div>

<button (click)="openCreateNewWeapon()">new Custom weapon</button>

<app-armor-selector></app-armor-selector>

<button (click)="skillDevelopMagic()">testskills</button>
@for ( customWeapon of characterDataService.character?.customWeapons; track
$index) {
<button (click)="openEditCustomWeapon(customWeapon)">
  {{ customWeapon.name }}
</button>

} @if(overlay){
<app-overlay-base
  (closeOverlayEvent)="closeOverlay()"
  [slectedCustomWeapon]="selectedCustomWeapon"
></app-overlay-base>
}
