<section
  [style.overflow]="overlayOpen ? 'hidden' : ''"
  [style.height]="overlayOpen ? '100vh' : ''"
>
  <main>
    <div class="headline-wrapper">
      <h1>Charakter erstellen</h1>
      <p>
        Verteile deine <br />
        35 Attributs-Punkte für
      </p>
    </div>

    <form [formGroup]="createCharacterForm" (submit)="submitCharacterDetails()">
      <div class="character-display">
        <input type="text" placeholder="Charakter Name" />
        <span
          >{{ characterRace?.name }} -
          {{ characterClass | classTranslate }}</span
        >
      </div>

      <div class="stat-distribution-wrapper">
        <div class="attribute-info-wrapper">
          <span>Attribut</span>
          <div>
            <span>Bonus</span>
            <span>Malus</span>
          </div>
        </div>

        <app-stat-distribution-row
          [statName]="'Stärke'"
          [statValue]="createCharacterForm.get('strengthValue')?.value"
          [statModifier]="characterRace?.strengthModifier ?? 0"
          [statBonus]="statBonuses['strengthBonus']"
          (decreaseEvent)="decreaseStat('strength')"
          (increaseEvent)="increaseStat('strength')"
        ></app-stat-distribution-row>

        <app-stat-distribution-row
          [statName]="'Geschicklichkeit'"
          [statValue]="createCharacterForm.get('agilityValue')?.value"
          [statModifier]="characterRace?.agilityModifier ?? 0"
          [statBonus]="statBonuses['agilityBonus']"
          (decreaseEvent)="decreaseStat('agility')"
          (increaseEvent)="increaseStat('agility')"
        ></app-stat-distribution-row>

        <app-stat-distribution-row
          [statName]="'Konstitution'"
          [statValue]="createCharacterForm.get('constitutionValue')?.value"
          [statModifier]="characterRace?.constitutionModifier ?? 0"
          [statBonus]="statBonuses['constitutionBonus']"
          (decreaseEvent)="decreaseStat('constitution')"
          (increaseEvent)="increaseStat('constitution')"
        ></app-stat-distribution-row>

        <app-stat-distribution-row
          [statName]="'Intelligenz'"
          [statValue]="createCharacterForm.get('intelligenceValue')?.value"
          [statModifier]="characterRace?.intelligenceModifier ?? 0"
          [statBonus]="statBonuses['intelligenceBonus']"
          (decreaseEvent)="decreaseStat('intelligence')"
          (increaseEvent)="increaseStat('intelligence')"
        ></app-stat-distribution-row>

        <app-stat-distribution-row
          [statName]="'Charisma'"
          [statValue]="createCharacterForm.get('charismaValue')?.value"
          [statModifier]="characterRace?.charismaModifier ?? 0"
          [statBonus]="statBonuses['charismaBonus']"
          (decreaseEvent)="decreaseStat('charisma')"
          (increaseEvent)="increaseStat('charisma')"
        ></app-stat-distribution-row>
      </div>
    </form>

    <div class="info-wrapper">
      <button type="button" (click)="toggleInfoOverlay()">
        <svg
          width="18"
          height="18"
          viewBox="0 0 18 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.1 13.5H9.89999V8.1H8.1V13.5ZM8.99999 6.3C9.25499 6.3 9.46889 6.2136 9.64169 6.0408C9.81449 5.868 9.90059 5.6544 9.89999 5.4C9.89939 5.1456 9.81299 4.932 9.64079 4.7592C9.46859 4.5864 9.25499 4.5 8.99999 4.5C8.74499 4.5 8.5314 4.5864 8.3592 4.7592C8.187 4.932 8.1006 5.1456 8.1 5.4C8.0994 5.6544 8.1858 5.8683 8.3592 6.0417C8.5326 6.2151 8.74619 6.3012 8.99999 6.3ZM8.99999 18C7.755 18 6.585 17.7636 5.49 17.2908C4.395 16.818 3.4425 16.1769 2.6325 15.3675C1.8225 14.5581 1.1814 13.6056 0.709201 12.51C0.237001 11.4144 0.000601139 10.2444 1.13924e-06 9C-0.00059886 7.7556 0.235801 6.5856 0.709201 5.49C1.1826 4.3944 1.8237 3.4419 2.6325 2.6325C3.4413 1.8231 4.3938 1.182 5.49 0.7092C6.5862 0.2364 7.7562 0 8.99999 0C10.2438 0 11.4138 0.2364 12.51 0.7092C13.6062 1.182 14.5587 1.8231 15.3675 2.6325C16.1763 3.4419 16.8177 4.3944 17.2917 5.49C17.7657 6.5856 18.0018 7.7556 18 9C17.9982 10.2444 17.7618 11.4144 17.2908 12.51C16.8198 13.6056 16.1787 14.5581 15.3675 15.3675C14.5563 16.1769 13.6038 16.8183 12.51 17.2917C11.4162 17.7651 10.2462 18.0012 8.99999 18Z"
            fill="#E0E0E0"
          />
        </svg>
        Anleitung
      </button>

      @if (developmentPointsLeft > 0) {
      <span class="error"
        >{{ developmentPointsLeft }} von 35 Punkten übrig.</span
      >
      }@else if (developmentPointsLeft === 0) {
      <span>Alle Punkte verteilt.</span>
      }@else {
      <span class="error">
        {{ pointsOverLimit }} Punkt{{ pointsOverLimit > 1 ? "e" : "" }} zu viel
        vergeben! </span
      >}
    </div>

    <app-navigation
      [nextText]="'Charakter erstellen'"
      (next)="submitCharacterDetails()"
    ></app-navigation>
  </main>
  <footer>asdasd</footer>
</section>

@if(overlayOpen){<app-overlay-base
  (closeOverlayEvent)="toggleInfoOverlay()"
></app-overlay-base
>}
